'use strict';var getFileListAsync=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(){var c=this,d;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d=function(h,i,j,k){return $('<tr class="fileListRow">\n                    <td><input type="radio" data-fileID="'+h+'"></td>\n                    <td class="fileName">'+i+'</td>\n                    <td>'+(j/1024/1024).toFixed(2)+' M</td>\n                    <td>'+parseTimeString(k)+'</td>\n                </tr>')},g.abrupt('return',new Promise(function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function i(j,k){var l,m,n,o,p,q,r,s,t,u,v,w;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,getAsync('/user/getFileList');case 3:if(l=y.sent,m=l.status,n=l.msg,o=l.data,m){y.next=9;break}showAlert(n),y.next=33;break;case 9:if(p=o.fileList,Object.is(p,null)){y.next=33;break}for(q=$('#fileListBody'),q.html(''),r=!0,s=!1,t=void 0,y.prev=16,u=p[Symbol.iterator]();!(r=(v=u.next()).done);r=!0)w=v.value,q.append(d(w.id,w.fileName,w.fileSize,w.createdAt));y.next=24;break;case 20:y.prev=20,y.t0=y['catch'](16),s=!0,t=y.t0;case 24:y.prev=24,y.prev=25,!r&&u.return&&u.return();case 27:if(y.prev=27,!s){y.next=30;break}throw t;case 30:return y.finish(27);case 31:return y.finish(24);case 32:enableRatios();case 33:j(),y.next=40;break;case 36:y.prev=36,y.t1=y['catch'](0),showAlert(MSG.ERROR),k(y.t1);case 40:case'end':return y.stop();}},i,c,[[0,36],[16,20,24,32],[25,,27,31]])}));return function(){return h.apply(this,arguments)}}()));case 2:case'end':return g.stop();}},b,this)}));return function(){return a.apply(this,arguments)}}(),getLoginEmailAsync=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(){var c=this;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt('return',new Promise(function(){var g=_asyncToGenerator(regeneratorRuntime.mark(function h(i,j){var k,l,m,n,o,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,k=$('#loginEmail'),r.next=4,getAsync('/user/getLoginEmail');case 4:l=r.sent,m=l.status,n=l.msg,o=l.data,m?(p=o.email,k.text(p)):showAlert(n),i(),r.next=14;break;case 10:r.prev=10,r.t0=r['catch'](0),showAlert(MSG.ERROR),j(r.t0);case 14:case'end':return r.stop();}},h,c,[[0,10]])}));return function(){return g.apply(this,arguments)}}()));case 1:case'end':return f.stop();}},b,this)}));return function(){return a.apply(this,arguments)}}(),getAsync=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(c){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt('return',new Promise(function(h,i){axios.get('/server/'+c,{params:d}).then(function(j){h(j.data)}).catch(function(j){i(j)})}));case 1:case'end':return g.stop();}},b,this)}));return function(){return a.apply(this,arguments)}}(),postAsync=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(c){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt('return',new Promise(function(h,i){axios.post('/server/'+c,d).then(function(j){h(j.data)}).catch(function(j){i(j)})}));case 1:case'end':return g.stop();}},b,this)}));return function(){return a.apply(this,arguments)}}();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function f(g,h){try{var i=b[g](h),j=i.value}catch(k){return void d(k)}return i.done?void c(j):Promise.resolve(j).then(function(k){f('next',k)},function(k){f('throw',k)})}return f('next')})}}function setElementClass(a,b){var c=$(a);c.addClass(b)}function removeElementClass(a,b){var c=$(a);c.removeClass(b)}function inputIsValid(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return b?(removeElementClass(a,'is-invalid'),setElementClass(a,'is-valid')):(removeElementClass(a,'is-valid'),setElementClass(a,'is-invalid')),b}function showAlert(a){var b=1<arguments.length&&arguments[1]!==void 0&&arguments[1],c=$('body'),f=!0===b?'alert-success':'alert-danger',g=$('<div class="alert '+f+'" role="alert" style="'+'\n\tdisplay: none;\n\ttext-align: center;\n    width: 50%;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    z-index: 999999999;'+'">\n    '+a+'\n</div>');c.append(g),g.fadeIn(150),setTimeout(function(){g.fadeOut(150,function(){g.remove()})},1e3)}function AJAX(a,b,c,d){var f=4<arguments.length&&arguments[4]!==void 0?arguments[4]:!0;$.ajax({xhrFields:{withCredentials:!0},contentType:'application/json',timeout:2e3,async:f,dataType:'json',url:'https://'+DOMAIN+'/server'+a,method:'post',data:JSON.stringify(b),success:c,error:d})}function hideModal(a){$(a).modal('hide')}function parseTimeString(a){var b=new Date(a);return b.getFullYear()+'-'+prependZero(b.getMonth()+1)+'-'+prependZero(b.getDate())+' '+prependZero(b.getHours())+':'+prependZero(b.getMinutes())+':'+prependZero(b.getSeconds())}function prependZero(a){return a=parseInt(a),10>a?'0'+a.toString():a.toString()}function download(a){var b=$('<a><span></span></a>'),c=b.children('span'),d=$('body');b.css('display','none'),b.attr('href',a),d.append(b),c.click(),b.remove()}function enableRatios(){var a=$('.fileListRow');a.click(function(b){a.find('input[type=radio]').prop('checked',!1),$(b.target).parent().find('input[type=radio]').prop('checked',!0)})}