'use strict';function setElementClass(a,b){var c=$(a);c.addClass(b)}function removeElementClass(a,b){var c=$(a);c.removeClass(b)}function inputIsValid(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return b?(removeElementClass(a,'is-invalid'),setElementClass(a,'is-valid')):(removeElementClass(a,'is-valid'),setElementClass(a,'is-invalid')),b}function showAlert(a){var b=1<arguments.length&&arguments[1]!==void 0&&arguments[1],c=$('body'),f=!0===b?'alert-success':'alert-danger',g=$('<div class="alert '+f+'" role="alert" style="'+'\n\tdisplay: none;\n\ttext-align: center;\n    width: 50%;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    z-index: 999999999;'+'">\n    '+a+'\n</div>');c.append(g),g.fadeIn(150),setTimeout(function(){g.fadeOut(150,function(){g.remove()})},1e3)}function AJAX(a,b,c,d){var f=4<arguments.length&&arguments[4]!==void 0?arguments[4]:!0;$.ajax({xhrFields:{withCredentials:!0},contentType:'application/json',timeout:2e3,async:f,dataType:'json',url:'https://'+DOMAIN+'/server'+a,method:'post',data:JSON.stringify(b),success:c,error:d})}function hideModal(a){$(a).modal('hide')}function parseTimeString(a){var b=new Date(a);return b.getFullYear()+'-'+prependZero(b.getMonth()+1)+'-'+prependZero(b.getDate())+' '+prependZero(b.getHours())+':'+prependZero(b.getMinutes())+':'+prependZero(b.getSeconds())}function prependZero(a){return a=parseInt(a),10>a?'0'+a.toString():a.toString()}function download(a){var b=$('<a><span></span></a>'),c=b.children('span'),d=$('body');b.css('display','none'),b.attr('href',a),d.append(b),c.click(),b.remove()}function getFileList(){var a=function(b,c,d,f){return $('<tr class="fileListRow">\n                    <td><input type="radio" data-fileID="'+b+'"></td>\n                    <td class="fileName">'+c+'</td>\n                    <td>'+(d/1024/1024).toFixed(2)+' M</td>\n                    <td>'+parseTimeString(f)+'</td>\n                </tr>')};AJAX('/user/getFileList',{},function(b){var c=b.status,d=b.msg,f=b.data;if(!c)showAlert(d);else{var g=f.fileList;if(!Object.is(g,null)){var h=$('#fileListBody');h.html('');var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var j,k,i=g[Symbol.iterator]();!(_iteratorNormalCompletion=(j=i.next()).done);_iteratorNormalCompletion=!0)k=j.value,h.append(a(k.id,k.fileName,k.fileSize,k.createdAt))}catch(l){_didIteratorError=!0,_iteratorError=l}finally{try{!_iteratorNormalCompletion&&i.return&&i.return()}finally{if(_didIteratorError)throw _iteratorError}}enableRatios()}}},function(b){showAlert(MSG.ERROR),console.log(b)})}function getLoginEmail(){var a=$('#loginEmail');AJAX('/user/getLoginEmail',{},function(b){var c=b.status,d=b.msg,f=b.data;if(!c)showAlert(d);else{var g=f.email;a.text(g)}},function(b){showAlert(MSG.ERROR),console.log(b)})}function enableRatios(){var a=$('.fileListRow');a.click(function(b){a.find('input[type=radio]').prop('checked',!1),$(b.target).parent().find('input[type=radio]').prop('checked',!0)})}